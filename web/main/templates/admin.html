{% extends "base_page.html" %}
{%  block more_head %}
<title> {{catalogs | length}} Catalogs pending - {{base_title}}</title>
{%  endblock %}
{% block content %}
{#
Show a list of catalogs files not already inserted in db
--------------------------------------------------------
#}
{% if not catalogs|length == 0 %}
<h4>Catalogs to add in database:</h4>
<table class="table-hover table">
    {% for paper in catalogs %}
    <tr>
        <td class="col-4 text-truncate" style="max-width: 550px;" title="{{paper.ark}}">
            {{paper.title}}
        </td>
        <td class="col-6">
            <button class="btn btn-warning add-catalog position-relative" data-paper_id="{{paper.id}}">add in db
                <span class="position-absolute top-0 start-100 translate-middle p-1 bg-danger border border-light rounded-circle">
                </span>
            </button>
        </td>
    </tr>
    {% endfor %}
</table>
<hr class="mt-2 mb-3">
<h4>Sutime strings:</h4>
<table id="sutime-str-table" class="table-hover table">
    <thead>
    <tr>
        <th scope="col-1" >ID</th>
        <th scope="col" >Paper Name (istex_id)</th>
        <th scope="col" >Text</th>
        <th scope="col" >DeltaTime</th>
    </tr>
    </thead>
    <tbody>
    {% for sutime_str in sutime_structs %}
    <tr>
        <td class="col-1">
            {% if sutime_str.paper_id is not none %}
        <a class="btn btn-warning paper-id" href="{{url_for('main.paper_show', paper_id=sutime_str.paper_id)}}"
           title="Show paper {{sutime_str.paper_name}}">
            {{sutime_str.paper_id}}
        </a>
            {% else %}
            none
            {% endif %}
        </td>
        <td class="col">
        </td>
        <td class="col">
            {{sutime_str.text}}
        </td>
        <td class="col">
            {{sutime_str.delta_time}}
        </td>
    </tr>
    {% endfor %}
</table>
{% endif %}
{%  endblock content %}

{% block scripts %}
<script src="{{url_for('static', filename='js/tools.js') | staticversion }} "></script>
<script>
    // For each un-added catalog button, attach callback:
    $('.add-catalog').on('click', push_catalog );
});
</script>
{%  endblock %}
